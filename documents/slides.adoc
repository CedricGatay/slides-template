= Tour d'horizon de JavaEE
:encoding: UTF-8
:author: Cedric Gatay
:keywords: @Cedric_Gatay
:email: contact@code-troopers.com
:backend: deckjs
:customcss: ct/ct.css
:customjs: ct/ct.js
:deckjs_transition: horizontal-slide
:menu:
:goto:
:status:
:source-highlighter: pygments
:split:

== Agenda
 * Java vs Java EE
 * Vue d'ensemble
 * Services
      ** Java Persistence API
      ** Stateless
      ** Stateful
      ** CDI
      ** Webservices
 * Exemple pratique

== Java vs JavaEE

== Contexte

Java

 * langage objet
 * v1.0 en 1995 / v8 en 2014
 * != Javascript

== Flashback
//TODO flashback the game canvas image

1996, internet balbutiant, cible applications lourdes

Concurrence des MFC / C++

Promesse du Write Once Run Anywhere

  * machine virtuelle
  * "assembleur universel"

Lenteurs de la machine

== Java
//This can be long, maybe introduce codenames with pictures to ease flow

 * Java 1.0 : 1996
    ** initial version
    ** stable 1.0.2

<<<

 * Java 1.1 : 1997
    ** JavaBeans
    ** JDBC
    ** Reflection (Read-only)
    ** Inner classes
    ** JIT (on Windows)

<<<

 * J2SE 1.2 : 1998
    ** 1520 classes (taille triplée)
    ** Swing
    ** Collections
    ** JIT everywhere

<<<

 * J2SE 1.3 : 2000
    ** JNDI
    ** JPDA
    ** JavaSound

<<<

 * J2SE 1.4 : 2002
    ** Regex
    ** Exception chaining
    ** NIO
    ** JAXP
    ** Java WebStart

<<<

 * J2SE 5.0 : 2004,
    ** Generics
    ** Annotations
    ** enum
    ** static imports
    ** java.util.concurrent

<<<

 * Java SE 6 : 2006
    ** Performances
    ** Scripting
    ** JAX-WS

<<<

 * Java SE 7 : 2011
    ** Invokedynamics
    ** try with resources
    ** NIO 2
    ** Concurrency utilities

<<<

 * Java SE 8 : 2014
    ** Lambda
    ** Date and time API
    ** Overhauled annotations

<<<

 * Java SE 9 : 2017?
    ** Java Modules
    ** Currency API
    ** Java REPL

 * Java SE 10 : 2018 ?
    ** Value types

== JavaEE

 * Java SE + des APIS "entreprise"
 * cycle de release indépendant

== Versions

 * 1999 : J2EE 1.2 (10 specs)
 * 2001 : J2EE 1.3 (13 specs)
 * 2003 : J2EE 1.4 (20 specs)
 * 2006 : JavaEE 5 (23 specs)
 * 2009 : JavaEE 6 (28 specs)
 * 2013 : JavaEE 7 (31 specs)
 * 2016?: JavaEE 8

[[ee-roadmap]]
image::images/ee-roadmap.png[]

== Version entreprise

 * applications visant à être
  ** fiables
  ** portables
  ** sécurisés
 * répondre à la montée d'internet
 * rationaliser les développements

== Serveurs d'application

 * exécute le code métier
 * fournit des services
 ** gestion des transactions
 ** gestion des sources de données
 ** mise en place de cluster
 ** remontée d'informations
 ** gestion des logs
 ** gestion des utilisateurs

== Process de normalisation

 * Ecriture d'une JSR
 * Fourniture du TCK
 * Ecriture d'une RI

== Pourquoi est-ce populaire ?

 * stations de dev Windows
 * serveurs Linux

-> peu d'adhérences à l'os

 * specs publiques, concurrence des serveurs
 * FOSS : culture open source importante

== Concepts

 * philosophie n-tiers
 * meta programmation par annotations
 * convention over configuration

== Architecture n-tiers

 * applications d'envergures
 * équipes multiples
 * responsabilités partagées

<<<

 * MVC
 ** Model
 ** View
 ** Controller

<<<

 * Mobile/Rich client
 ** REST endpoints
 ** Model
 ** Controller

== Annotations

 * Besoin d'ajouter des informations au code
 * Utilisation intensive de XML
 * Ajout d'annotations (introduction Java 1.5)

[source,xml]
-----
<servlet-mapping>
//TODO BLAAAA
</servlet-mapping>
-----

[source,java]
----
@WebServlet
public class HelloEPUT{
}
----

== Convention over configuration

 * à l'utilisation des _patterns_ sont apparus
 * simplification de l'utilisation en les adoptant par défaut
 * possibilité de redéfinition manuelle

// SLIDE BREAK - ENOUGH TALKING, ALL ACTIONS

== Premiers pas

 * destiné principalement au monde web
 * gère la réponse simple à une requête HTTP

[source,java]
-----
@WebServlet
public class MyServlet{
  static int count[] = new int[]{ 0,0};
  public void doGet(){
      count[0]++;
  }

  public void doPost(){
     count[1]++;
  }

  private writeResponse(){
    response.write("Get count : " + count[0]);
    response.write("Post count : " + count[1]);
  }
}
-----

== Packaging

 * format d'archives en *AR
   ** WAR : Web Archive
   ** JAR : Java Archive
   ** EAR : Enterprise Archive

 * Exécution gérée par le serveur d'application


== Java Persistence API

 * ORM
 * Gestion des transactions (Java Transaction API)
 * Mise en cache
 * Agnostique du SGBD

// etoffer avec un exemple ´a l'ancienne'
[source,sql]
-----
SELECT name,email FROM users;
-----

[source,java]
-----
@Entity("users")
class User{
 String name;
 String email;
}
class UserService{
 List<User> all(){
  return em.getResultList("SELECT u FROM User");
 }
}
-----


== CDI

 * mecanisme d'IoC, central a JavaEE
 * definition d'un `scopeˋ, de l'association a des services
 * declaration des dependances
 * Hollywood principle

== Enterprise Java Bean

 * encapsule la logique métier
 * cycle de vie automatique
 * trois types principaux
  ** sans état
  ** avec état
  ** singletons

== Stateless

 * Le container manage le cycle de vie des objets
 * Certains peuvent être recyclés

== Stateful

 * le container gere l'etat et l'associe a un client
 * panier d'achat e-commerce

== JSP / JSF
//TODO talk about these as they are in the specs

== Webservices

 * déclaration des ressources
 * REST / SOAP
 * assemblage transparent avec les autres services

== Ecosysteme

== Serveurs d'application

 //list goes here
 * Wildfly
 * TomEE
 * Jboss AS
 * Websphere
 * Weblogic

== FOSS

 //list goes here
 * Eclipse
 * Apache
 * Codehaus
 * Github

=== Projets notables

 * Maven
 * Hibernate
 * AspectJ
 * Jetty
 * Tomcat

== "Concurrents"

 // list goes here
 * Spring
 * Play! Framework
 * Grails
 * Ruby On Rails
 * Symfony


== TP + CC

 * mini projet à 2 -> 4
 * base de travail commune à tous
 ** squelette fonctionnel
 ** sujet identique
 * notation à l'issue de la dernière séance

== Références
[bibliography]

- [[ee-roadmap]] http://blog.eisele.net/2013/06/javaee7-is-final.html